<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=ks_c_5601-1987">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:굴림;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"맑은 고딕";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:굴림체;
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:한컴바탕;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@맑은 고딕";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:"\@한컴바탕";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@굴림";
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:"\@굴림체";
	panose-1:2 11 6 9 0 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:107%;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"맑은 고딕";}
h1
	{mso-style-link:"제목 1 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:115%;
	page-break-after:avoid;
	text-autospace:none;
	word-break:break-hangul;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;
	font-weight:normal;}
h2
	{mso-style-link:"제목 2 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:115%;
	page-break-after:avoid;
	text-autospace:none;
	word-break:break-hangul;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	font-weight:normal;}
h3
	{mso-style-link:"제목 3 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:15.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-100.0pt;
	line-height:115%;
	page-break-after:avoid;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;
	font-weight:normal;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"머리글 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:107%;
	layout-grid-mode:char;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"맑은 고딕";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"바닥글 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:107%;
	layout-grid-mode:char;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"맑은 고딕";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:115%;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
p.MsoListBullet, li.MsoListBullet, div.MsoListBullet
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:18.05pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-18.0pt;
	line-height:107%;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"맑은 고딕";}
p.MsoListBulletCxSpFirst, li.MsoListBulletCxSpFirst, div.MsoListBulletCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:18.05pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-18.0pt;
	line-height:107%;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"맑은 고딕";}
p.MsoListBulletCxSpMiddle, li.MsoListBulletCxSpMiddle, div.MsoListBulletCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:18.05pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-18.0pt;
	line-height:107%;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"맑은 고딕";}
p.MsoListBulletCxSpLast, li.MsoListBulletCxSpLast, div.MsoListBulletCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:18.05pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-18.0pt;
	line-height:107%;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"맑은 고딕";}
a:link, span.MsoHyperlink
	{color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#954F72;
	text-decoration:underline;}
pre
	{mso-style-link:"미리 서식이 지정된 HTML Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:굴림체;}
span.MsoPlaceholderText
	{color:gray;}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"맑은 고딕";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:40.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:107%;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"맑은 고딕";}
span.1Char
	{mso-style-name:"제목 1 Char";
	mso-style-link:"제목 1";
	font-family:"Times New Roman",serif;}
span.2Char
	{mso-style-name:"제목 2 Char";
	mso-style-link:"제목 2";
	font-family:"Times New Roman",serif;}
span.3Char
	{mso-style-name:"제목 3 Char";
	mso-style-link:"제목 3";
	font-family:"Times New Roman",serif;}
span.Char
	{mso-style-name:"머리글 Char";
	mso-style-link:머리글;}
span.Char0
	{mso-style-name:"바닥글 Char";
	mso-style-link:바닥글;}
span.HTMLChar
	{mso-style-name:"미리 서식이 지정된 HTML Char";
	mso-style-link:"미리 서식이 지정된 HTML";
	font-family:굴림체;}
p.a, li.a, div.a
	{mso-style-name:바탕글;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:160%;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"한컴바탕",serif;
	color:black;}
.MsoChpDefault
	{font-family:"맑은 고딕";}
.MsoPapDefault
	{margin-bottom:8.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:107%;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:3.0cm 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=KO link="#0563C1" vlink="#954F72">

<div class=WordSection1>

<h1><b><span lang=EN-US style='font-size:17.0pt;line-height:115%'>Computational
Photography Assignment #5 by Junekyo Jhung</span></b></h1>

<h1><b><span lang=EN-US>Initials</span></b></h1>

<h2><span lang=EN-US>Description</span></h2>

<p class=MsoNormal><span style='font-size:11.0pt;line-height:107%'>과제에서</span><span
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>기본으로</span><span style='font-size:
11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>제공된</span><span style='font-size:
11.0pt;line-height:107%;font-family:"Times New Roman",serif'> <span lang=EN-US>chessboard_lightfield.png
</span></span><span style='font-size:11.0pt;line-height:107%'>이미지를</span><span
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>불러들인</span><span style='font-size:
11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>후</span><span style='font-size:11.0pt;
line-height:107%;font-family:"Times New Roman",serif'> <span lang=EN-US>5</span></span><span
style='font-size:11.0pt;line-height:107%'>차원의</span><span style='font-size:
11.0pt;line-height:107%;font-family:"Times New Roman",serif'> <span lang=EN-US>L(u;
v; s; t; c) </span></span><span style='font-size:11.0pt;line-height:107%'>배열을</span><span
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>정의한다</span><span lang=EN-US
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'>.
</span><span style='font-size:11.0pt;line-height:107%'>변수</span><span
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'> <span
lang=EN-US>u</span></span><span style='font-size:11.0pt;line-height:107%'>와</span><span
lang=EN-US style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'>
v</span><span style='font-size:11.0pt;line-height:107%'>는</span><span
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'> <span
lang=EN-US>aperture, s </span></span><span style='font-size:11.0pt;line-height:
107%'>와</span><span style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'>
<span lang=EN-US>t</span></span><span style='font-size:11.0pt;line-height:107%'>는</span><span
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'> <span
lang=EN-US>lenslet, c </span></span><span style='font-size:11.0pt;line-height:
107%'>는</span><span style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'>
</span><span style='font-size:11.0pt;line-height:107%'>컬러</span><span
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>채널이다</span><span lang=EN-US
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'>.
</span><span style='font-size:11.0pt;line-height:107%'>문제에서</span><span
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>제시한</span><span style='font-size:
11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>것을</span><span style='font-size:11.0pt;
line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>바탕으로</span><span style='font-size:
11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>각각의</span><span style='font-size:
11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>변수를</span><span style='font-size:
11.0pt;line-height:107%;font-family:"Times New Roman",serif'> </span><span
style='font-size:11.0pt;line-height:107%'>정의한다</span><span lang=EN-US
style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'>.</span></p>

<h2><span class=2Char><span lang=EN-US>MATLAB</span></span></h2>

<h2><span lang=EN-US><img width=601 height=159
src="hw5_Jhung.files/image001.png"
alt="%% Initials&#13;&#10;disp('Loading the chess image..');&#13;&#10;img = imread('data/chessboard_lightfield.png');&#13;&#10;[w, h, ch] = size(img);     % width, height, channel&#13;&#10;u = 16;                     % aperture coordinate u&#13;&#10;v = 16;                     % aperture coordinate v&#13;&#10;s = 400;                    % lenslet coordinate s&#13;&#10;t = 700;                    % lenslet coordinate t&#13;&#10;c = 3;                      % color channels&#13;&#10;L = zeros(u, v, s, t, c);   % 5-dimentional array of light field&#13;&#10;"></span></h2>

<h1><b><span lang=EN-US>Sub-aperture Views</span></b></h1>

<h2><span lang=EN-US>Description</span></h2>

<p class=MsoNormal><span lang=EN-US>Camera aperture </span>변수인 <span
lang=EN-US>u</span>와 <span lang=EN-US>v</span>를 변경<span lang=EN-US>(u0, v0)</span>하여
각기 다른 <span lang=EN-US>pinhole</span>에서의 이미지를 하나의 모자이크 이미지로 합성하는 것이 목적이다<span
lang=EN-US>. L</span>의 <span lang=EN-US>aperture domain</span>에 <span
lang=EN-US>pinhole image</span>를 갱신하여 하나의 이미지를 합성하여<span lang=EN-US> mosaic
image</span>를 <span lang=EN-US>figure 1</span>과 같이 만들 수 있다<span lang=EN-US>.</span></p>

<h2><span lang=EN-US>MATLAB</span></h2>

<p class=MsoNormal><span lang=EN-US><img width=601 height=320
src="hw5_Jhung.files/image002.png"
alt="%% Sub-aperture Views&#13;&#10;disp('Creating mosaic image of sub-aperture views..');&#13;&#10;for i = 1:u&#13;&#10;   for j = 1:v&#13;&#10;       for k = 1:s&#13;&#10;           for l = 1:t&#13;&#10;               u_o = u * (k - 1) + i;&#13;&#10;               v_o = v * (l - 1) + j;&#13;&#10;               L(i, j, k, l, 1) = double(img(u_o, v_o, 1)) / 256;&#13;&#10;               L(i, j, k, l, 2) = double(img(u_o, v_o, 2)) / 256;&#13;&#10;               L(i, j, k, l, 3) = double(img(u_o, v_o, 3)) / 256;&#13;&#10;           end&#13;&#10;       end&#13;&#10;   end&#13;&#10;end&#13;&#10;for i = 1:u&#13;&#10;    for j = 1:v&#13;&#10;        img_subapt((s * (i - 1) + 1):(s * i),(t * (j - 1) + 1):(t * j), :) = L(i, j, :, :, :);&#13;&#10;    end&#13;&#10;end&#13;&#10;"></span></p>

<h2><span lang=EN-US>Results</span></h2>

<p class=MsoNormal><span lang=EN-US><img width=598 height=352 id="그림 4"
src="hw5_Jhung.files/image003.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>1</span><span lang=EN-US>. Sub-aperture Views Mosaic Image</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><b><span lang=EN-US>Refocusing and Focal-stack Generation</span></b></h1>

<h2><span lang=EN-US>Description</span></h2>

<p class=MsoNormal><span lang=EN-US>Figure 2</span>와 같이 <span lang=EN-US>Equation(2)</span>을
적용하여 앞서 얻은 <span lang=EN-US>sub-aperture </span>이미지<span lang=EN-US>(L)</span>을
합성한다<span lang=EN-US>.</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=531 height=31 id="그림 1" src="hw5_Jhung.files/image004.png"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>2</span><span lang=EN-US>. Focal Stack Equation</span></p>

<p class=MsoNormal>본 보고서에서는 <span lang=EN-US>depth </span>값을 최소 <span
lang=EN-US>0.0</span>에서 최대 <span lang=EN-US>2.0</span>까지 <span lang=EN-US>0.2 </span>간격으로
설정하여 총 <span lang=EN-US>11</span>장의 <span lang=EN-US>refocusing</span>을 실시하였다<span
lang=EN-US>. </span>그런데 과제 설명서에 명시된 것처럼 합성 구간을 <span lang=EN-US>1</span>에서 <span
lang=EN-US>16</span>으로 설정한 결과 이미지가 <span lang=EN-US>refocusing </span>뿐만 아니라 약간의
<span lang=EN-US>shifting</span>이 발생하는 것으로 보인다<span lang=EN-US>. </span>이에 대한 원인은
찾지 못하였다<span lang=EN-US>.</span></p>

<h2><span lang=EN-US>MATLAB</span></h2>

<p class=MsoNormal><span lang=EN-US><img width=601 height=338
src="hw5_Jhung.files/image005.png"
alt="%% Refocusing and Focal-stack Generation&#13;&#10;disp('Refocusing and focal-stack generation..');&#13;&#10;&#13;&#10;for d = 0:0.6:3&#13;&#10;    img_refocus = zeros(s, t, c);&#13;&#10;    for i = 1:s&#13;&#10;        for j = 1:t&#13;&#10;            for k = 1:u&#13;&#10;                for l = 1:v&#13;&#10;                    du = round(i + k * d);&#13;&#10;                    dv = round(j - l * d);&#13;&#10;                    img_refocus(i, j, 1) = img_refocus(i, j, 1) + L(k, l, du, dv, 1);&#13;&#10;                    img_refocus(i, j, 2) = img_refocus(i, j, 2) + L(k, l, du, dv, 2);&#13;&#10;                    img_refocus(i, j, 3) = img_refocus(i, j, 3) + L(k, l, du, dv, 3);&#13;&#10;                end&#13;&#10;            end&#13;&#10;end&#13;&#10;    end&#13;&#10;end&#13;&#10;"></span></p>

<h2><span lang=EN-US>Results</span></h2>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 5" src="hw5_Jhung.files/image006.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>3</span><span lang=EN-US>. Image Stack with d = 0.0</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 8" src="hw5_Jhung.files/image007.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>4</span><span lang=EN-US>. Image Stack with d = 0.2</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 20" src="hw5_Jhung.files/image008.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>5</span><span lang=EN-US>. Image Stack with d = 0.4</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 22" src="hw5_Jhung.files/image009.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>6</span><span lang=EN-US>. Image Stack with d = 0.6</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 23" src="hw5_Jhung.files/image010.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>7</span><span lang=EN-US>. Image Stack with d = 0.8</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 24" src="hw5_Jhung.files/image011.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>8</span><span lang=EN-US>. Image Stack with d = 1.0</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 25" src="hw5_Jhung.files/image012.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>9</span><span lang=EN-US>. Image Stack with d = 1.2</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 26" src="hw5_Jhung.files/image013.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>10</span><span lang=EN-US>. Image Stack with d = 1.4</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 27" src="hw5_Jhung.files/image014.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>11</span><span lang=EN-US>. Image Stack with d = 1.6</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 28" src="hw5_Jhung.files/image015.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>12</span><span lang=EN-US>. Image Stack with d = 1.8</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=297 height=170 id="그림 29" src="hw5_Jhung.files/image016.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>13</span><span lang=EN-US>. Image Stack with d = 2.0</span></p>

<h1><b><span lang=EN-US>All-focus image and depth from defocus</span></b></h1>

<h2><span lang=EN-US>Description</span></h2>

<p class=MsoNormal><span lang=EN-US>Figure 14</span>에서 제시된 공식들과 같이 이미지의 밝기를 구하기
위해 <span lang=EN-US>rgb</span>에서 <span lang=EN-US>xyz</span>영역으로의 변환하고 이미지의 <span
lang=EN-US>low</span>와 <span lang=EN-US>high frequency</span>를 통해<span
lang=EN-US> blur</span>된 이미지 구하여 <span lang=EN-US>Gaussian</span>을 통해 이미지의 <span
lang=EN-US>sharpness</span>를 구한다<span lang=EN-US>.</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=420 height=214 id="그림 32" src="hw5_Jhung.files/image017.jpg"></span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=338 height=55 id="그림 2" src="hw5_Jhung.files/image018.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>14</span><span lang=EN-US>. Equational Steps for Defocusing</span></p>

<p class=MsoNormal><span lang=EN-US>Low frequency</span>의 <span lang=EN-US>standard
deviation </span>값은 <span lang=EN-US>2, sharpness weight</span>의 <span
lang=EN-US>standard deviation </span>값은 <span lang=EN-US>5</span>로 정의한다<span
lang=EN-US>. </span>각 <span lang=EN-US>standard deviation </span>값의 변화에 따라 과한 <span
lang=EN-US>blur</span>가 발생하여 선명도가 떨어짐을 확인하였고 <span lang=EN-US>2</span>와 <span
lang=EN-US>5</span>의 결과 값이 가장 적절한 이미지를 출력하는 것으로 판단된다<span lang=EN-US>. Depth
map</span>은 아래의 공식과 같이 각 <span lang=EN-US>depth </span>값에 <span lang=EN-US>weight</span>를
곱한 후 최대값과의 차를 통해서 구한다<span lang=EN-US>.</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=229 height=37 id="그림 3" src="hw5_Jhung.files/image019.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>15</span><span lang=EN-US>. Depth Map Equation</span></p>

<h2><span lang=EN-US>MATLAB</span></h2>

<p class=MsoNormal><span lang=EN-US><img width=601 height=578
src="hw5_Jhung.files/image020.png"
alt="%% All-focus Image and Depth from Defocus&#13;&#10;disp('All-focus image and depth from defocus..');&#13;&#10;[row, col] = size(img_stack);&#13;&#10;std_1 = 2;&#13;&#10;std_2 = 5;&#13;&#10;&#13;&#10;for i = 1:col&#13;&#10;&#13;&#10;    img_lum{end + 1} = rgb2xyz(img_stack{i}, 'ColorSpace', 'srgb');&#13;&#10;&#13;&#10;    img_low{end + 1} = imgaussfilt(img_lum{end}, std_1);&#13;&#10;    img_high{end + 1} = img_lum{end} - img_low{end};&#13;&#10;&#13;&#10;    img_sharp{end + 1} = imgaussfilt(img_high{end} .^ 2, std_2);&#13;&#10;end&#13;&#10;&#13;&#10;for i = 1:s&#13;&#10;     for j = 1:t&#13;&#10;        for k = 1:col&#13;&#10;            img_defocus(i, j, 1) = img_defocus(i, j, 1) + ...                img_stack{k}(i, j, 1) * img_sharp{k}(i, j);&#13;&#10;           img_defocus(i, j, 2) = img_defocus(i, j, 2) + ...&#13;&#10;               img_stack{k}(i, j, 2) * img_sharp{k}(i, j);&#13;&#10;           img_defocus(i, j, 3) = img_defocus(i, j, 3) + ...&#13;&#10;               img_stack{k}(i, j, 3) * img_sharp{k}(i, j);&#13;&#10;           weight = weight + img_sharp{k}(i, j);&#13;&#10;           &#13;&#10;           img_dmap(i, j) = img_dmap(i, j) + img_sharp{k}(i, j) * k;&#13;&#10;       end&#13;&#10;&#13;&#10;       img_defocus(i, j, :) = img_defocus(i, j, :) / weight;&#13;&#10;       img_dmap(i, j) = img_dmap(i, j) / weight;&#13;&#10;&#13;&#10;    end&#13;&#10;end&#13;&#10;&#13;&#10;img_dmap(i, j) = 1. - img_dmap(i, j) / col;&#13;&#10;"></span></p>

<h2><span lang=EN-US>Results</span></h2>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=331 height=189 id="그림 33" src="hw5_Jhung.files/image021.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>16</span><span lang=EN-US>. Defocused Image</span></p>

<p class=MsoNormal style='page-break-after:avoid'><span lang=EN-US><img
width=331 height=189 id="그림 34" src="hw5_Jhung.files/image022.jpg"></span></p>

<p class=MsoCaption><span lang=EN-US>Figure </span><span
lang=EN-US>17</span><span lang=EN-US>. Depth Map Image</span></p>

<p class=MsoNormal><span lang=X-NONE style='font-size:0pt;line-height:107%;
font-family:"Times New Roman",serif;color:black;background:black;layout-grid-mode:
line'>&nbsp;</span></p>

<p class=MsoNormal><span lang=X-NONE style='font-size:0pt;line-height:107%;
font-family:"Times New Roman",serif;color:black;background:black;layout-grid-mode:
line'>&nbsp;</span></p>

<p class=MsoNormal><span lang=X-NONE style='font-size:0pt;line-height:107%;
font-family:"Times New Roman",serif;color:black;background:black;layout-grid-mode:
line'>&nbsp;</span></p>

<p class=MsoNormal><span lang=X-NONE style='font-size:0pt;line-height:107%;
font-family:"Times New Roman",serif;color:black;background:black;layout-grid-mode:
line'>&nbsp;</span></p>

</div>

</body>

</html>
